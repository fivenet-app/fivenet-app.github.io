import{D as C,E as j,G as Ft,H as J,I as Ke,J as Bt,r as B,b as et,K as Te,L as ge,M as tt,d as se,N as ce,O as Nt,P as N,C as ee,Q as Dt,R as nt,S as Vt,U as Oe,o as be,V as we,W as jt,X as Kt,Y as Wt,Z as ke,$ as De,F as Me,a0 as Ve,a1 as Ee,a2 as Ut,a3 as st,a4 as Ht,a5 as qt,a6 as X,a7 as ot,a8 as We,a9 as Gt,aa as q,l as it,ab as Re,ac as lt,ad as rt,ae as at,af as ve,c as z,e as W,n as F,t as te,g as G,f as ne,ag as ye,ah as U,w as ae,ai as re,aj as me,ak as Yt,k as Jt,al as Qt,am as Ue,an as ut,ao as ct,ap as _e,aq as dt,ar as ht,as as Xt,at as Zt,h as ft,au as en,av as pt,aw as tn,z as nn,a as sn,ax as on,ay as ln,az as rn,aA as an,aB as un,aC as cn,aD as dn,aE as hn}from"./C4SrLzgQ.js";import{_ as vt,u as mt}from"./CASdp-4_.js";import{f as fn}from"./CE46u1-S.js";import"./BIURV-Yl.js";const pn={wrapper:"flex flex-col flex-1 min-h-0 divide-y divide-gray-100 dark:divide-gray-800",container:"relative flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-800 scroll-py-2",input:{wrapper:"relative flex items-center",base:"w-full placeholder-gray-400 dark:placeholder-gray-500 bg-transparent border-0 text-gray-900 dark:text-white focus:ring-0 focus:outline-none",padding:"px-4",height:"h-12",size:"sm:text-sm",icon:{base:"pointer-events-none absolute start-4 text-gray-400 dark:text-gray-500",loading:"animate-spin",size:"h-5 w-5",padding:"ps-11"},closeButton:{base:"absolute end-4",padding:"pe-10"}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",queryLabel:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},group:{wrapper:"p-2",label:"px-2.5 my-2 text-xs font-semibold text-gray-900 dark:text-white",container:"text-sm text-gray-700 dark:text-gray-200",command:{base:"flex justify-between select-none items-center rounded-md px-2.5 py-1.5 gap-2 relative",active:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactive:"",label:"flex items-center gap-1.5 min-w-0",prefix:"text-gray-400 dark:text-gray-500",suffix:"text-gray-400 dark:text-gray-500",container:"flex items-center gap-1.5 min-w-0",icon:{base:"flex-shrink-0 w-5 h-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"},disabled:"opacity-50",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5"},active:"flex-shrink-0 text-gray-500 dark:text-gray-400",inactive:"flex-shrink-0 text-gray-500 dark:text-gray-400"},default:{icon:"i-heroicons-magnifying-glass-20-solid",loadingIcon:"i-heroicons-arrow-path-20-solid",emptyState:{icon:"i-heroicons-magnifying-glass-20-solid",label:"We couldn't find any items.",queryLabel:"We couldn't find any items with that term. Please try again."},closeButton:null,selectedIcon:"i-heroicons-check-20-solid"}};function pe(e,s,t){let o=t.initialDeps??[],n;return()=>{var i,r,l,c;let u;t.key&&((i=t.debug)!=null&&i.call(t))&&(u=Date.now());const a=e();if(!(a.length!==o.length||a.some((b,I)=>o[I]!==b)))return n;o=a;let h;if(t.key&&((r=t.debug)!=null&&r.call(t))&&(h=Date.now()),n=s(...a),t.key&&((l=t.debug)!=null&&l.call(t))){const b=Math.round((Date.now()-u)*100)/100,I=Math.round((Date.now()-h)*100)/100,R=I/16,P=(T,S)=>{for(T=String(T);T.length<S;)T=" "+T;return T};console.info(`%c⏱ ${P(I,5)} /${P(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(c=t==null?void 0:t.onChange)==null||c.call(t,n),n}}function Ae(e,s){if(e===void 0)throw new Error("Unexpected undefined");return e}const vn=(e,s)=>Math.abs(e-s)<1,mn=(e,s,t)=>{let o;return function(...n){e.clearTimeout(o),o=e.setTimeout(()=>s.apply(this,n),t)}},gn=e=>e,bn=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),o=[];for(let n=s;n<=t;n++)o.push(n);return o},yn=(e,s)=>{const t=e.scrollElement;if(!t)return;const o=e.targetWindow;if(!o)return;const n=r=>{const{width:l,height:c}=r;s({width:Math.round(l),height:Math.round(c)})};if(n(t.getBoundingClientRect()),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(r=>{const l=r[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){n({width:c.inlineSize,height:c.blockSize});return}}n(t.getBoundingClientRect())});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},He={passive:!0},xn=typeof window>"u"?!0:"onscrollend"in window,In=(e,s)=>{const t=e.scrollElement;if(!t)return;const o=e.targetWindow;if(!o)return;let n=0;const i=xn?()=>{}:mn(o,()=>{s(n,!1)},e.options.isScrollingResetDelay),r=u=>()=>{n=t[e.options.horizontal?"scrollLeft":"scrollTop"],i(),s(n,u)},l=r(!0),c=r(!1);return c(),t.addEventListener("scroll",l,He),t.addEventListener("scrollend",c,He),()=>{t.removeEventListener("scroll",l),t.removeEventListener("scrollend",c)}},Sn=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},On=(e,{adjustments:s=0,behavior:t},o)=>{var n,i;const r=e+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:r,behavior:t})};class wn{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{this._measureElement(i.target,i)})}));return{disconnect:()=>{var n;return(n=o())==null?void 0:n.disconnect()},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,n])=>{typeof n>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:gn,rangeExtractor:bn,onChange:()=>{},measureElement:Sn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,...t}},this.notify=(t,o)=>{var n,i;const{startIndex:r,endIndex:l}=this.range??{startIndex:void 0,endIndex:void 0},c=this.calculateRange();(t||r!==(c==null?void 0:c.startIndex)||l!==(c==null?void 0:c.endIndex))&&((i=(n=this.options).onChange)==null||i.call(n,this,o))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.notify(!1,!1);return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n;const r=this.isScrolling;this.isScrolling=i,this.notify(r!==i,i)}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,o)=>{const n=new Map,i=new Map;for(let r=o-1;r>=0;r--){const l=t[r];if(n.has(l.lane))continue;const c=i.get(l.lane);if(c==null||l.end>c.end?i.set(l.lane,l):l.end<c.end&&n.set(l.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((r,l)=>r.end===l.end?r.index-l.index:r.end-l.end)[0]:void 0},this.getMeasurementOptions=pe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,o,n,i,r)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:r}),{key:!1}),this.getMeasurements=pe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:r},l)=>{var c;if(!r)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const u=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const a=this.measurementsCache.slice(0,u);for(let d=u;d<t;d++){let h=(c=this.measurementsCache[d])==null?void 0:c.measureElement;h||(h=L=>{const x=i(d),A=this.elementsCache.get(x);if(!L){A&&(this.observer.unobserve(A),this.elementsCache.delete(x));return}A!==L&&(A&&this.observer.unobserve(A),this.observer.observe(L),this.elementsCache.set(x,L)),L.isConnected&&this.resizeItem(d,this.options.measureElement(L,void 0,this))});const b=i(d),I=this.options.lanes===1?a[d-1]:this.getFurthestMeasurement(a,d),R=I?I.end+this.options.gap:o+n,P=l.get(b),T=typeof P=="number"?P:this.options.estimateSize(d),S=R+T,$=I?I.lane:d%this.options.lanes;a[d]={index:d,start:R,size:T,end:S,key:b,lane:$,measureElement:h}}return this.measurementsCache=a,a},{key:!1,debug:()=>this.options.debug}),this.calculateRange=pe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,o,n)=>this.range=t.length>0&&o>0?Mn({measurements:t,outerSize:o,scrollOffset:n}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=pe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,o,n,i)=>o===null?[]:t({startIndex:o.startIndex,endIndex:o.endIndex,overscan:n,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,n=t.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const n=this.indexFromElement(t),i=this.getMeasurements()[n];if(!i||!t.isConnected){this.elementsCache.forEach((l,c)=>{l===t&&(this.observer.unobserve(t),this.elementsCache.delete(c))});return}const r=this.elementsCache.get(i.key);r!==t&&(r&&this.observer.unobserve(r),this.observer.observe(t),this.elementsCache.set(i.key,t)),this.resizeItem(n,this.options.measureElement(t,o,this))},this.resizeItem=(t,o)=>{const n=this.getMeasurements()[t];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,r=o-i;r!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,r,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=r,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!0,!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=pe(()=>[this.getIndexes(),this.getMeasurements()],(t,o)=>{const n=[];for(let i=0,r=t.length;i<r;i++){const l=t[i],c=o[l];n.push(c)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();if(o.length!==0)return Ae(o[gt(0,o.length-1,n=>Ae(o[n]).start,t)])},this.getOffsetForAlignment=(t,o)=>{const n=this.getSize(),i=this.getScrollOffset();o==="auto"&&(t<=i?o="start":t>=i+n?o="end":o="start"),o==="start"?t=t:o==="end"?t=t-n:o==="center"&&(t=t-n/2);const r=this.options.horizontal?"scrollWidth":"scrollHeight",c=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[r]:this.scrollElement[r]:0)-n;return Math.max(Math.min(c,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=this.getMeasurements()[t];if(!n)return;const i=this.getSize(),r=this.getScrollOffset();if(o==="auto")if(n.end>=r+i-this.options.scrollPaddingEnd)o="end";else if(n.start<=r+this.options.scrollPaddingStart)o="start";else return[r,o];const l=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,o),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:o="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:o="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(t,o);if(!i)return;const[r,l]=i;this._scrollToOffset(r,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[u]=Ae(this.getOffsetForIndex(t,l));vn(u,this.getScrollOffset())||this.scrollToIndex(t,{align:l,behavior:n})}else this.scrollToIndex(t,{align:l,behavior:n})}))},this.scrollBy=(t,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let n;return o.length===0?n=this.options.paddingStart:n=this.options.lanes===1?((t=o[o.length-1])==null?void 0:t.end)??0:Math.max(...o.slice(-this.options.lanes).map(i=>i.end)),n-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:o,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:o},this)},this.measure=()=>{var t,o;this.itemSizeCache=new Map,(o=(t=this.options).onChange)==null||o.call(t,this,!1)},this.setOptions(s)}}const gt=(e,s,t,o)=>{for(;e<=s;){const n=(e+s)/2|0,i=t(n);if(i<o)e=n+1;else if(i>o)s=n-1;else return n}return e>0?e-1:0};function Mn({measurements:e,outerSize:s,scrollOffset:t}){const o=e.length-1,i=gt(0,o,l=>e[l].start,t);let r=i;for(;r<o&&e[r].end<t+s;)r++;return{startIndex:i,endIndex:r}}function En(e){const s=new wn(j(e)),t=Ft(s),o=s._didMount();return J(()=>j(e).getScrollElement(),n=>{n&&s._willUpdate()},{immediate:!0}),J(()=>j(e),n=>{s.setOptions({...n,onChange:(i,r)=>{var l;Ke(t),(l=n.onChange)==null||l.call(n,i,r)}}),s._willUpdate(),Ke(t)},{immediate:!0}),Bt(o),t}function Cn(e){return En(C(()=>({observeElementRect:yn,observeElementOffset:In,scrollToFn:On,...j(e)})))}function kn(e,s,t){let o=B(t==null?void 0:t.value),n=C(()=>e.value!==void 0);return[C(()=>n.value?e.value:o.value),function(i){return n.value||(o.value=i),s==null?void 0:s(i)}]}function Rn(){let e=Te();return et(()=>e.dispose()),e}function An(){let e=Rn();return s=>{e.dispose(),e.nextFrame(s)}}function qe(e){return[e.screenX,e.screenY]}function $n(){let e=B([-1,-1]);return{wasMoved(s){let t=qe(s);return e.value[0]===t[0]&&e.value[1]===t[1]?!1:(e.value=t,!0)},update(s){e.value=qe(s)}}}function Tn({container:e,accept:s,walk:t,enabled:o}){ge(()=>{let n=e.value;if(!n||o!==void 0&&!o.value)return;let i=tt(e);if(!i)return;let r=Object.assign(c=>s(c),{acceptNode:s}),l=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,r,!1);for(;l.nextNode();)t(l.currentNode)})}var bt=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(bt||{});function _n(e){throw new Error("Unexpected object: "+e)}var V=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(V||{});function Ge(e,s){let t=s.resolveItems();if(t.length<=0)return null;let o=s.resolveActiveIndex(),n=o??-1;switch(e.focus){case 0:{for(let i=0;i<t.length;++i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 1:{n===-1&&(n=t.length);for(let i=n-1;i>=0;--i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 2:{for(let i=n+1;i<t.length;++i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 3:{for(let i=t.length-1;i>=0;--i)if(!s.resolveDisabled(t[i],i,t))return i;return o}case 4:{for(let i=0;i<t.length;++i)if(s.resolveId(t[i],i,t)===e.id)return i;return o}case 5:return null;default:_n(e)}}function yt(e={},s=null,t=[]){for(let[o,n]of Object.entries(e))It(t,xt(s,o),n);return t}function xt(e,s){return e?e+"["+s+"]":s}function It(e,s,t){if(Array.isArray(t))for(let[o,n]of t.entries())It(e,xt(s,o.toString()),n);else t instanceof Date?e.push([s,t.toISOString()]):typeof t=="boolean"?e.push([s,t?"1":"0"]):typeof t=="string"?e.push([s,t]):typeof t=="number"?e.push([s,`${t}`]):t==null?e.push([s,""]):yt(t,s,e)}var Pn={};function Ln(e,s){return e===s}var zn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(zn||{}),Fn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Fn||{}),Bn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Bn||{});let St=Symbol("ComboboxContext");function xe(e){let s=st(St,null);if(s===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,xe),t}return s}let Ot=Symbol("VirtualContext"),Nn=se({name:"VirtualProvider",setup(e,{slots:s}){let t=xe("VirtualProvider"),o=C(()=>{let l=N(t.optionsRef);if(!l)return{start:0,end:0};let c=window.getComputedStyle(l);return{start:parseFloat(c.paddingBlockStart||c.paddingTop),end:parseFloat(c.paddingBlockEnd||c.paddingBottom)}}),n=Cn(C(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return N(t.optionsRef)},overscan:12}))),i=C(()=>{var l;return(l=t.virtual.value)==null?void 0:l.options}),r=B(0);return J([i],()=>{r.value+=1}),nt(Ot,t.virtual.value?n:null),()=>[we("div",{style:{position:"relative",width:"100%",height:`${n.value.getTotalSize()}px`},ref:l=>{if(l){if(typeof process<"u"&&Pn.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&n.value.scrollToIndex(t.activeOptionIndex.value)}}},n.value.getVirtualItems().map(l=>Ht(s.default({option:t.virtual.value.options[l.index],open:t.comboboxState.value===0})[0],{key:`${r.value}-${l.index}`,"data-index":l.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":l.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${l.start}px)`,overflowAnchor:"none"}})))]}}),Dn=se({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:s,attrs:t,emit:o}){let n=B(1),i=B(null),r=B(null),l=B(null),c=B(null),u=B({static:!1,hold:!1}),a=B([]),d=B(null),h=B(2),b=B(!1);function I(p=g=>g){let g=d.value!==null?a.value[d.value]:null,O=p(a.value.slice()),v=O.length>0&&O[0].dataRef.order.value!==null?O.sort((w,M)=>w.dataRef.order.value-M.dataRef.order.value):qt(O,w=>N(w.dataRef.domRef)),m=g?v.indexOf(g):null;return m===-1&&(m=null),{options:v,activeOptionIndex:m}}let R=C(()=>e.multiple?1:0),P=C(()=>e.nullable),[T,S]=kn(C(()=>e.modelValue),p=>o("update:modelValue",p),C(()=>e.defaultValue)),$=C(()=>T.value===void 0?ce(R.value,{1:[],0:void 0}):T.value),L=null,x=null;function A(p){return ce(R.value,{0(){return S==null?void 0:S(p)},1:()=>{let g=ee(f.value.value).slice(),O=ee(p),v=g.findIndex(m=>f.compare(O,ee(m)));return v===-1?g.push(O):g.splice(v,1),S==null?void 0:S(g)}})}let y=C(()=>{});J([y],([p],[g])=>{if(f.virtual.value&&p&&g&&d.value!==null){let O=p.indexOf(g[d.value]);O!==-1?d.value=O:d.value=null}});let f={comboboxState:n,value:$,mode:R,compare(p,g){if(typeof e.by=="string"){let O=e.by;return(p==null?void 0:p[O])===(g==null?void 0:g[O])}return e.by===null?Ln(p,g):e.by(p,g)},calculateIndex(p){return f.virtual.value?e.by===null?f.virtual.value.options.indexOf(p):f.virtual.value.options.findIndex(g=>f.compare(g,p)):a.value.findIndex(g=>f.compare(g.dataRef.value,p))},defaultValue:C(()=>e.defaultValue),nullable:P,immediate:C(()=>!1),virtual:C(()=>null),inputRef:r,labelRef:i,buttonRef:l,optionsRef:c,disabled:C(()=>e.disabled),options:a,change(p){S(p)},activeOptionIndex:C(()=>{if(b.value&&d.value===null&&(f.virtual.value?f.virtual.value.options.length>0:a.value.length>0)){if(f.virtual.value){let g=f.virtual.value.options.findIndex(O=>{var v;return!((v=f.virtual.value)!=null&&v.disabled(O))});if(g!==-1)return g}let p=a.value.findIndex(g=>!g.dataRef.disabled);if(p!==-1)return p}return d.value}),activationTrigger:h,optionsPropsRef:u,closeCombobox(){b.value=!1,!e.disabled&&n.value!==1&&(n.value=1,d.value=null)},openCombobox(){if(b.value=!0,!e.disabled&&n.value!==0){if(f.value.value){let p=f.calculateIndex(f.value.value);p!==-1&&(d.value=p)}n.value=0}},setActivationTrigger(p){h.value=p},goToOption(p,g,O){b.value=!1,L!==null&&cancelAnimationFrame(L),L=requestAnimationFrame(()=>{if(e.disabled||c.value&&!u.value.static&&n.value===1)return;if(f.virtual.value){d.value=p===V.Specific?g:Ge({focus:p},{resolveItems:()=>f.virtual.value.options,resolveActiveIndex:()=>{var w,M;return(M=(w=f.activeOptionIndex.value)!=null?w:f.virtual.value.options.findIndex(_=>{var D;return!((D=f.virtual.value)!=null&&D.disabled(_))}))!=null?M:null},resolveDisabled:w=>f.virtual.value.disabled(w),resolveId(){throw new Error("Function not implemented.")}}),h.value=O??2;return}let v=I();if(v.activeOptionIndex===null){let w=v.options.findIndex(M=>!M.dataRef.disabled);w!==-1&&(v.activeOptionIndex=w)}let m=p===V.Specific?g:Ge({focus:p},{resolveItems:()=>v.options,resolveActiveIndex:()=>v.activeOptionIndex,resolveId:w=>w.id,resolveDisabled:w=>w.dataRef.disabled});d.value=m,h.value=O??2,a.value=v.options})},selectOption(p){let g=a.value.find(v=>v.id===p);if(!g)return;let{dataRef:O}=g;A(O.value)},selectActiveOption(){if(f.activeOptionIndex.value!==null){if(f.virtual.value)A(f.virtual.value.options[f.activeOptionIndex.value]);else{let{dataRef:p}=a.value[f.activeOptionIndex.value];A(p.value)}f.goToOption(V.Specific,f.activeOptionIndex.value)}},registerOption(p,g){let O=Nt({id:p,dataRef:g});if(f.virtual.value){a.value.push(O);return}x&&cancelAnimationFrame(x);let v=I(m=>(m.push(O),m));d.value===null&&f.isSelected(g.value.value)&&(v.activeOptionIndex=v.options.indexOf(O)),a.value=v.options,d.value=v.activeOptionIndex,h.value=2,v.options.some(m=>!N(m.dataRef.domRef))&&(x=requestAnimationFrame(()=>{let m=I();a.value=m.options,d.value=m.activeOptionIndex}))},unregisterOption(p,g){if(L!==null&&cancelAnimationFrame(L),g&&(b.value=!0),f.virtual.value){a.value=a.value.filter(v=>v.id!==p);return}let O=I(v=>{let m=v.findIndex(w=>w.id===p);return m!==-1&&v.splice(m,1),v});a.value=O.options,d.value=O.activeOptionIndex,h.value=2},isSelected(p){return ce(R.value,{0:()=>f.compare(ee(f.value.value),ee(p)),1:()=>ee(f.value.value).some(g=>f.compare(ee(g),ee(p)))})},isActive(p){return d.value===f.calculateIndex(p)}};Dt([r,l,c],()=>f.closeCombobox(),C(()=>n.value===0)),nt(St,f),Vt(C(()=>ce(n.value,{0:Oe.Open,1:Oe.Closed})));let E=C(()=>{var p;return(p=N(r))==null?void 0:p.closest("form")});return be(()=>{J([E],()=>{if(!E.value||e.defaultValue===void 0)return;function p(){f.change(e.defaultValue)}return E.value.addEventListener("reset",p),()=>{var g;(g=E.value)==null||g.removeEventListener("reset",p)}},{immediate:!0})}),()=>{var p,g,O;let{name:v,disabled:m,form:w,...M}=e,_={open:n.value===0,disabled:m,activeIndex:f.activeOptionIndex.value,activeOption:f.activeOptionIndex.value===null?null:f.virtual.value?f.virtual.value.options[(p=f.activeOptionIndex.value)!=null?p:0]:(O=(g=f.options.value[f.activeOptionIndex.value])==null?void 0:g.dataRef.value)!=null?O:null,value:$.value};return we(Me,[...v!=null&&$.value!=null?yt({[v]:$.value}).map(([D,Q])=>we(jt,Kt({features:Wt.Hidden,key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:w,disabled:m,name:D,value:Q}))):[],ke({theirProps:{...t,...De(M,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:_,slots:s,attrs:t,name:"Combobox"})])}}}),Vn=se({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:s,attrs:t,slots:o,expose:n}){var i;let r=(i=e.id)!=null?i:`headlessui-combobox-input-${Ve()}`,l=xe("ComboboxInput"),c=C(()=>tt(N(l.inputRef))),u={value:!1};n({el:l.inputRef,$el:l.inputRef});function a(){l.change(null);let x=N(l.optionsRef);x&&(x.scrollTop=0),l.goToOption(V.Nothing)}let d=C(()=>{var x;let A=l.value.value;return N(l.inputRef)?typeof e.displayValue<"u"&&A!==void 0?(x=e.displayValue(A))!=null?x:"":typeof A=="string"?A:"":""});be(()=>{J([d,l.comboboxState,c],([x,A],[y,f])=>{if(u.value)return;let E=N(l.inputRef);E&&((f===0&&A===1||x!==y)&&(E.value=x),requestAnimationFrame(()=>{var p;if(u.value||!E||((p=c.value)==null?void 0:p.activeElement)!==E)return;let{selectionStart:g,selectionEnd:O}=E;Math.abs((O??0)-(g??0))===0&&g===0&&E.setSelectionRange(E.value.length,E.value.length)}))},{immediate:!0}),J([l.comboboxState],([x],[A])=>{if(x===0&&A===1){if(u.value)return;let y=N(l.inputRef);if(!y)return;let f=y.value,{selectionStart:E,selectionEnd:p,selectionDirection:g}=y;y.value="",y.value=f,g!==null?y.setSelectionRange(E,p,g):y.setSelectionRange(E,p)}})});let h=B(!1);function b(){h.value=!0}function I(){Te().nextFrame(()=>{h.value=!1})}let R=An();function P(x){switch(u.value=!0,R(()=>{u.value=!1}),x.key){case X.Enter:if(u.value=!1,l.comboboxState.value!==0||h.value)return;if(x.preventDefault(),x.stopPropagation(),l.activeOptionIndex.value===null){l.closeCombobox();return}l.selectActiveOption(),l.mode.value===0&&l.closeCombobox();break;case X.ArrowDown:return u.value=!1,x.preventDefault(),x.stopPropagation(),ce(l.comboboxState.value,{0:()=>l.goToOption(V.Next),1:()=>l.openCombobox()});case X.ArrowUp:return u.value=!1,x.preventDefault(),x.stopPropagation(),ce(l.comboboxState.value,{0:()=>l.goToOption(V.Previous),1:()=>{l.openCombobox(),ot(()=>{l.value.value||l.goToOption(V.Last)})}});case X.Home:if(x.shiftKey)break;return u.value=!1,x.preventDefault(),x.stopPropagation(),l.goToOption(V.First);case X.PageUp:return u.value=!1,x.preventDefault(),x.stopPropagation(),l.goToOption(V.First);case X.End:if(x.shiftKey)break;return u.value=!1,x.preventDefault(),x.stopPropagation(),l.goToOption(V.Last);case X.PageDown:return u.value=!1,x.preventDefault(),x.stopPropagation(),l.goToOption(V.Last);case X.Escape:if(u.value=!1,l.comboboxState.value!==0)return;x.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&x.stopPropagation(),l.nullable.value&&l.mode.value===0&&l.value.value===null&&a(),l.closeCombobox();break;case X.Tab:if(u.value=!1,l.comboboxState.value!==0)return;l.mode.value===0&&l.activationTrigger.value!==1&&l.selectActiveOption(),l.closeCombobox();break}}function T(x){s("change",x),l.nullable.value&&l.mode.value===0&&x.target.value===""&&a(),l.openCombobox()}function S(x){var A,y,f;let E=(A=x.relatedTarget)!=null?A:We.find(p=>p!==x.currentTarget);if(u.value=!1,!((y=N(l.optionsRef))!=null&&y.contains(E))&&!((f=N(l.buttonRef))!=null&&f.contains(E))&&l.comboboxState.value===0)return x.preventDefault(),l.mode.value===0&&(l.nullable.value&&l.value.value===null?a():l.activationTrigger.value!==1&&l.selectActiveOption()),l.closeCombobox()}function $(x){var A,y,f;let E=(A=x.relatedTarget)!=null?A:We.find(p=>p!==x.currentTarget);(y=N(l.buttonRef))!=null&&y.contains(E)||(f=N(l.optionsRef))!=null&&f.contains(E)||l.disabled.value||l.immediate.value&&l.comboboxState.value!==0&&(l.openCombobox(),Te().nextFrame(()=>{l.setActivationTrigger(1)}))}let L=C(()=>{var x,A,y,f;return(f=(y=(A=e.defaultValue)!=null?A:l.defaultValue.value!==void 0?(x=e.displayValue)==null?void 0:x.call(e,l.defaultValue.value):null)!=null?y:l.defaultValue.value)!=null?f:""});return()=>{var x,A,y,f,E,p,g;let O={open:l.comboboxState.value===0},{displayValue:v,onChange:m,...w}=e,M={"aria-controls":(x=l.optionsRef.value)==null?void 0:x.id,"aria-expanded":l.comboboxState.value===0,"aria-activedescendant":l.activeOptionIndex.value===null?void 0:l.virtual.value?(A=l.options.value.find(_=>!l.virtual.value.disabled(_.dataRef.value)&&l.compare(_.dataRef.value,l.virtual.value.options[l.activeOptionIndex.value])))==null?void 0:A.id:(y=l.options.value[l.activeOptionIndex.value])==null?void 0:y.id,"aria-labelledby":(p=(f=N(l.labelRef))==null?void 0:f.id)!=null?p:(E=N(l.buttonRef))==null?void 0:E.id,"aria-autocomplete":"list",id:r,onCompositionstart:b,onCompositionend:I,onKeydown:P,onInput:T,onFocus:$,onBlur:S,role:"combobox",type:(g=t.type)!=null?g:"text",tabIndex:0,ref:l.inputRef,defaultValue:L.value,disabled:l.disabled.value===!0?!0:void 0};return ke({ourProps:M,theirProps:w,slot:O,attrs:t,slots:o,features:Ee.RenderStrategy|Ee.Static,name:"ComboboxInput"})}}}),jn=se({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:s,slots:t,expose:o}){let n=xe("ComboboxOptions"),i=`headlessui-combobox-options-${Ve()}`;o({el:n.optionsRef,$el:n.optionsRef}),ge(()=>{n.optionsPropsRef.value.static=e.static}),ge(()=>{n.optionsPropsRef.value.hold=e.hold});let r=Ut(),l=C(()=>r!==null?(r.value&Oe.Open)===Oe.Open:n.comboboxState.value===0);Tn({container:C(()=>N(n.optionsRef)),enabled:C(()=>n.comboboxState.value===0),accept(u){return u.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});function c(u){u.preventDefault()}return()=>{var u,a,d;let h={open:n.comboboxState.value===0},b={"aria-labelledby":(d=(u=N(n.labelRef))==null?void 0:u.id)!=null?d:(a=N(n.buttonRef))==null?void 0:a.id,id:i,ref:n.optionsRef,role:"listbox","aria-multiselectable":n.mode.value===1?!0:void 0,onMousedown:c},I=De(e,["hold"]);return ke({ourProps:b,theirProps:I,slot:h,attrs:s,slots:n.virtual.value&&n.comboboxState.value===0?{...t,default:()=>[we(Nn,{},t.default)]}:t,features:Ee.RenderStrategy|Ee.Static,visible:l.value,name:"ComboboxOptions"})}}}),Kn=se({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:s,attrs:t,expose:o}){let n=xe("ComboboxOption"),i=`headlessui-combobox-option-${Ve()}`,r=B(null),l=C(()=>e.disabled);o({el:r,$el:r});let c=C(()=>{var S;return n.virtual.value?n.activeOptionIndex.value===n.calculateIndex(e.value):n.activeOptionIndex.value===null?!1:((S=n.options.value[n.activeOptionIndex.value])==null?void 0:S.id)===i}),u=C(()=>n.isSelected(e.value)),a=st(Ot,null),d=C(()=>({disabled:e.disabled,value:e.value,domRef:r,order:C(()=>e.order)}));be(()=>n.registerOption(i,d)),et(()=>n.unregisterOption(i,c.value)),ge(()=>{let S=N(r);S&&(a==null||a.value.measureElement(S))}),ge(()=>{n.comboboxState.value===0&&c.value&&(n.virtual.value||n.activationTrigger.value!==0&&ot(()=>{var S,$;return($=(S=N(r))==null?void 0:S.scrollIntoView)==null?void 0:$.call(S,{block:"nearest"})}))});function h(S){S.preventDefault(),S.button===bt.Left&&(l.value||(n.selectOption(i),Gt()||requestAnimationFrame(()=>{var $;return($=N(n.inputRef))==null?void 0:$.focus({preventScroll:!0})}),n.mode.value===0&&n.closeCombobox()))}function b(){var S;if(e.disabled||(S=n.virtual.value)!=null&&S.disabled(e.value))return n.goToOption(V.Nothing);let $=n.calculateIndex(e.value);n.goToOption(V.Specific,$)}let I=$n();function R(S){I.update(S)}function P(S){var $;if(!I.wasMoved(S)||e.disabled||($=n.virtual.value)!=null&&$.disabled(e.value)||c.value)return;let L=n.calculateIndex(e.value);n.goToOption(V.Specific,L,0)}function T(S){var $;I.wasMoved(S)&&(e.disabled||($=n.virtual.value)!=null&&$.disabled(e.value)||c.value&&(n.optionsPropsRef.value.hold||n.goToOption(V.Nothing)))}return()=>{let{disabled:S}=e,$={active:c.value,selected:u.value,disabled:S},L={id:i,ref:r,role:"option",tabIndex:S===!0?void 0:-1,"aria-disabled":S===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onMousedown:h,onFocus:b,onPointerenter:R,onMouseenter:R,onPointermove:P,onMousemove:P,onPointerleave:T,onMouseleave:T},x=De(e,["order","value"]);return ke({ourProps:L,theirProps:x,slot:$,attrs:t,slots:s,name:"ComboboxOption"})}}});function Z(e){return Array.isArray?Array.isArray(e):Et(e)==="[object Array]"}const Wn=1/0;function Un(e){if(typeof e=="string")return e;let s=e+"";return s=="0"&&1/e==-Wn?"-0":s}function Hn(e){return e==null?"":Un(e)}function Y(e){return typeof e=="string"}function wt(e){return typeof e=="number"}function qn(e){return e===!0||e===!1||Gn(e)&&Et(e)=="[object Boolean]"}function Mt(e){return typeof e=="object"}function Gn(e){return Mt(e)&&e!==null}function K(e){return e!=null}function $e(e){return!e.trim().length}function Et(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Yn="Incorrect 'index' type",Jn=e=>`Invalid value for key ${e}`,Qn=e=>`Pattern length exceeds max of ${e}.`,Xn=e=>`Missing ${e} property in key`,Zn=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ye=Object.prototype.hasOwnProperty;class es{constructor(s){this._keys=[],this._keyMap={};let t=0;s.forEach(o=>{let n=Ct(o);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(o=>{o.weight/=t})}get(s){return this._keyMap[s]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ct(e){let s=null,t=null,o=null,n=1,i=null;if(Y(e)||Z(e))o=e,s=Je(e),t=Pe(e);else{if(!Ye.call(e,"name"))throw new Error(Xn("name"));const r=e.name;if(o=r,Ye.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(Zn(r));s=Je(r),t=Pe(r),i=e.getFn}return{path:s,id:t,weight:n,src:o,getFn:i}}function Je(e){return Z(e)?e:e.split(".")}function Pe(e){return Z(e)?e.join("."):e}function ts(e,s){let t=[],o=!1;const n=(i,r,l)=>{if(K(i))if(!r[l])t.push(i);else{let c=r[l];const u=i[c];if(!K(u))return;if(l===r.length-1&&(Y(u)||wt(u)||qn(u)))t.push(Hn(u));else if(Z(u)){o=!0;for(let a=0,d=u.length;a<d;a+=1)n(u[a],r,l+1)}else r.length&&n(u,r,l+1)}};return n(e,Y(s)?s.split("."):s,0),o?t:t[0]}const ns={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ss={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,s)=>e.score===s.score?e.idx<s.idx?-1:1:e.score<s.score?-1:1},os={location:0,threshold:.6,distance:100},is={useExtendedSearch:!1,getFn:ts,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var k={...ss,...ns,...os,...is};const ls=/[^ ]+/g;function rs(e=1,s=3){const t=new Map,o=Math.pow(10,s);return{get(n){const i=n.match(ls).length;if(t.has(i))return t.get(i);const r=1/Math.pow(i,.5*e),l=parseFloat(Math.round(r*o)/o);return t.set(i,l),l},clear(){t.clear()}}}class je{constructor({getFn:s=k.getFn,fieldNormWeight:t=k.fieldNormWeight}={}){this.norm=rs(t,3),this.getFn=s,this.isCreated=!1,this.setIndexRecords()}setSources(s=[]){this.docs=s}setIndexRecords(s=[]){this.records=s}setKeys(s=[]){this.keys=s,this._keysMap={},s.forEach((t,o)=>{this._keysMap[t.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Y(this.docs[0])?this.docs.forEach((s,t)=>{this._addString(s,t)}):this.docs.forEach((s,t)=>{this._addObject(s,t)}),this.norm.clear())}add(s){const t=this.size();Y(s)?this._addString(s,t):this._addObject(s,t)}removeAt(s){this.records.splice(s,1);for(let t=s,o=this.size();t<o;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(s,t){return s[this._keysMap[t]]}size(){return this.records.length}_addString(s,t){if(!K(s)||$e(s))return;let o={v:s,i:t,n:this.norm.get(s)};this.records.push(o)}_addObject(s,t){let o={i:t,$:{}};this.keys.forEach((n,i)=>{let r=n.getFn?n.getFn(s):this.getFn(s,n.path);if(K(r)){if(Z(r)){let l=[];const c=[{nestedArrIndex:-1,value:r}];for(;c.length;){const{nestedArrIndex:u,value:a}=c.pop();if(K(a))if(Y(a)&&!$e(a)){let d={v:a,i:u,n:this.norm.get(a)};l.push(d)}else Z(a)&&a.forEach((d,h)=>{c.push({nestedArrIndex:h,value:d})})}o.$[i]=l}else if(Y(r)&&!$e(r)){let l={v:r,n:this.norm.get(r)};o.$[i]=l}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function kt(e,s,{getFn:t=k.getFn,fieldNormWeight:o=k.fieldNormWeight}={}){const n=new je({getFn:t,fieldNormWeight:o});return n.setKeys(e.map(Ct)),n.setSources(s),n.create(),n}function as(e,{getFn:s=k.getFn,fieldNormWeight:t=k.fieldNormWeight}={}){const{keys:o,records:n}=e,i=new je({getFn:s,fieldNormWeight:t});return i.setKeys(o),i.setIndexRecords(n),i}function Se(e,{errors:s=0,currentLocation:t=0,expectedLocation:o=0,distance:n=k.distance,ignoreLocation:i=k.ignoreLocation}={}){const r=s/e.length;if(i)return r;const l=Math.abs(o-t);return n?r+l/n:l?1:r}function us(e=[],s=k.minMatchCharLength){let t=[],o=-1,n=-1,i=0;for(let r=e.length;i<r;i+=1){let l=e[i];l&&o===-1?o=i:!l&&o!==-1&&(n=i-1,n-o+1>=s&&t.push([o,n]),o=-1)}return e[i-1]&&i-o>=s&&t.push([o,i-1]),t}const le=32;function cs(e,s,t,{location:o=k.location,distance:n=k.distance,threshold:i=k.threshold,findAllMatches:r=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,includeMatches:c=k.includeMatches,ignoreLocation:u=k.ignoreLocation}={}){if(s.length>le)throw new Error(Qn(le));const a=s.length,d=e.length,h=Math.max(0,Math.min(o,d));let b=i,I=h;const R=l>1||c,P=R?Array(d):[];let T;for(;(T=e.indexOf(s,I))>-1;){let y=Se(s,{currentLocation:T,expectedLocation:h,distance:n,ignoreLocation:u});if(b=Math.min(y,b),I=T+a,R){let f=0;for(;f<a;)P[T+f]=1,f+=1}}I=-1;let S=[],$=1,L=a+d;const x=1<<a-1;for(let y=0;y<a;y+=1){let f=0,E=L;for(;f<E;)Se(s,{errors:y,currentLocation:h+E,expectedLocation:h,distance:n,ignoreLocation:u})<=b?f=E:L=E,E=Math.floor((L-f)/2+f);L=E;let p=Math.max(1,h-E+1),g=r?d:Math.min(h+E,d)+a,O=Array(g+2);O[g+1]=(1<<y)-1;for(let m=g;m>=p;m-=1){let w=m-1,M=t[e.charAt(w)];if(R&&(P[w]=+!!M),O[m]=(O[m+1]<<1|1)&M,y&&(O[m]|=(S[m+1]|S[m])<<1|1|S[m+1]),O[m]&x&&($=Se(s,{errors:y,currentLocation:w,expectedLocation:h,distance:n,ignoreLocation:u}),$<=b)){if(b=$,I=w,I<=h)break;p=Math.max(1,2*h-I)}}if(Se(s,{errors:y+1,currentLocation:h,expectedLocation:h,distance:n,ignoreLocation:u})>b)break;S=O}const A={isMatch:I>=0,score:Math.max(.001,$)};if(R){const y=us(P,l);y.length?c&&(A.indices=y):A.isMatch=!1}return A}function ds(e){let s={};for(let t=0,o=e.length;t<o;t+=1){const n=e.charAt(t);s[n]=(s[n]||0)|1<<o-t-1}return s}class Rt{constructor(s,{location:t=k.location,threshold:o=k.threshold,distance:n=k.distance,includeMatches:i=k.includeMatches,findAllMatches:r=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,isCaseSensitive:c=k.isCaseSensitive,ignoreLocation:u=k.ignoreLocation}={}){if(this.options={location:t,threshold:o,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?s:s.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(h,b)=>{this.chunks.push({pattern:h,alphabet:ds(h),startIndex:b})},d=this.pattern.length;if(d>le){let h=0;const b=d%le,I=d-b;for(;h<I;)a(this.pattern.substr(h,le),h),h+=le;if(b){const R=d-le;a(this.pattern.substr(R),R)}}else a(this.pattern,0)}searchIn(s){const{isCaseSensitive:t,includeMatches:o}=this.options;if(t||(s=s.toLowerCase()),this.pattern===s){let I={isMatch:!0,score:0};return o&&(I.indices=[[0,s.length-1]]),I}const{location:n,distance:i,threshold:r,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let a=[],d=0,h=!1;this.chunks.forEach(({pattern:I,alphabet:R,startIndex:P})=>{const{isMatch:T,score:S,indices:$}=cs(s,I,R,{location:n+P,distance:i,threshold:r,findAllMatches:l,minMatchCharLength:c,includeMatches:o,ignoreLocation:u});T&&(h=!0),d+=S,T&&$&&(a=[...a,...$])});let b={isMatch:h,score:h?d/this.chunks.length:1};return h&&o&&(b.indices=a),b}}class oe{constructor(s){this.pattern=s}static isMultiMatch(s){return Qe(s,this.multiRegex)}static isSingleMatch(s){return Qe(s,this.singleRegex)}search(){}}function Qe(e,s){const t=e.match(s);return t?t[1]:null}class hs extends oe{constructor(s){super(s)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(s){const t=s===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class fs extends oe{constructor(s){super(s)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(s){const o=s.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,s.length-1]}}}class ps extends oe{constructor(s){super(s)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(s){const t=s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class vs extends oe{constructor(s){super(s)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(s){const t=!s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class ms extends oe{constructor(s){super(s)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(s){const t=s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[s.length-this.pattern.length,s.length-1]}}}class gs extends oe{constructor(s){super(s)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(s){const t=!s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class At extends oe{constructor(s,{location:t=k.location,threshold:o=k.threshold,distance:n=k.distance,includeMatches:i=k.includeMatches,findAllMatches:r=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,isCaseSensitive:c=k.isCaseSensitive,ignoreLocation:u=k.ignoreLocation}={}){super(s),this._bitapSearch=new Rt(s,{location:t,threshold:o,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(s){return this._bitapSearch.searchIn(s)}}class $t extends oe{constructor(s){super(s)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(s){let t=0,o;const n=[],i=this.pattern.length;for(;(o=s.indexOf(this.pattern,t))>-1;)t=o+i,n.push([o,t-1]);const r=!!n.length;return{isMatch:r,score:r?0:1,indices:n}}}const Le=[hs,$t,ps,vs,gs,ms,fs,At],Xe=Le.length,bs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ys="|";function xs(e,s={}){return e.split(ys).map(t=>{let o=t.trim().split(bs).filter(i=>i&&!!i.trim()),n=[];for(let i=0,r=o.length;i<r;i+=1){const l=o[i];let c=!1,u=-1;for(;!c&&++u<Xe;){const a=Le[u];let d=a.isMultiMatch(l);d&&(n.push(new a(d,s)),c=!0)}if(!c)for(u=-1;++u<Xe;){const a=Le[u];let d=a.isSingleMatch(l);if(d){n.push(new a(d,s));break}}}return n})}const Is=new Set([At.type,$t.type]);class Ss{constructor(s,{isCaseSensitive:t=k.isCaseSensitive,includeMatches:o=k.includeMatches,minMatchCharLength:n=k.minMatchCharLength,ignoreLocation:i=k.ignoreLocation,findAllMatches:r=k.findAllMatches,location:l=k.location,threshold:c=k.threshold,distance:u=k.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:o,minMatchCharLength:n,findAllMatches:r,ignoreLocation:i,location:l,threshold:c,distance:u},this.pattern=t?s:s.toLowerCase(),this.query=xs(this.pattern,this.options)}static condition(s,t){return t.useExtendedSearch}searchIn(s){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:n}=this.options;s=n?s:s.toLowerCase();let i=0,r=[],l=0;for(let c=0,u=t.length;c<u;c+=1){const a=t[c];r.length=0,i=0;for(let d=0,h=a.length;d<h;d+=1){const b=a[d],{isMatch:I,indices:R,score:P}=b.search(s);if(I){if(i+=1,l+=P,o){const T=b.constructor.type;Is.has(T)?r=[...r,...R]:r.push(R)}}else{l=0,i=0,r.length=0;break}}if(i){let d={isMatch:!0,score:l/i};return o&&(d.indices=r),d}}return{isMatch:!1,score:1}}}const ze=[];function Os(...e){ze.push(...e)}function Fe(e,s){for(let t=0,o=ze.length;t<o;t+=1){let n=ze[t];if(n.condition(e,s))return new n(e,s)}return new Rt(e,s)}const Ce={AND:"$and",OR:"$or"},Be={PATH:"$path",PATTERN:"$val"},Ne=e=>!!(e[Ce.AND]||e[Ce.OR]),ws=e=>!!e[Be.PATH],Ms=e=>!Z(e)&&Mt(e)&&!Ne(e),Ze=e=>({[Ce.AND]:Object.keys(e).map(s=>({[s]:e[s]}))});function Tt(e,s,{auto:t=!0}={}){const o=n=>{let i=Object.keys(n);const r=ws(n);if(!r&&i.length>1&&!Ne(n))return o(Ze(n));if(Ms(n)){const c=r?n[Be.PATH]:i[0],u=r?n[Be.PATTERN]:n[c];if(!Y(u))throw new Error(Jn(c));const a={keyId:Pe(c),pattern:u};return t&&(a.searcher=Fe(u,s)),a}let l={children:[],operator:i[0]};return i.forEach(c=>{const u=n[c];Z(u)&&u.forEach(a=>{l.children.push(o(a))})}),l};return Ne(e)||(e=Ze(e)),o(e)}function Es(e,{ignoreFieldNorm:s=k.ignoreFieldNorm}){e.forEach(t=>{let o=1;t.matches.forEach(({key:n,norm:i,score:r})=>{const l=n?n.weight:null;o*=Math.pow(r===0&&l?Number.EPSILON:r,(l||1)*(s?1:i))}),t.score=o})}function Cs(e,s){const t=e.matches;s.matches=[],K(t)&&t.forEach(o=>{if(!K(o.indices)||!o.indices.length)return;const{indices:n,value:i}=o;let r={indices:n,value:i};o.key&&(r.key=o.key.src),o.idx>-1&&(r.refIndex=o.idx),s.matches.push(r)})}function ks(e,s){s.score=e.score}function Rs(e,s,{includeMatches:t=k.includeMatches,includeScore:o=k.includeScore}={}){const n=[];return t&&n.push(Cs),o&&n.push(ks),e.map(i=>{const{idx:r}=i,l={item:s[r],refIndex:r};return n.length&&n.forEach(c=>{c(i,l)}),l})}class de{constructor(s,t={},o){this.options={...k,...t},this.options.useExtendedSearch,this._keyStore=new es(this.options.keys),this.setCollection(s,o)}setCollection(s,t){if(this._docs=s,t&&!(t instanceof je))throw new Error(Yn);this._myIndex=t||kt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(s){K(s)&&(this._docs.push(s),this._myIndex.add(s))}remove(s=()=>!1){const t=[];for(let o=0,n=this._docs.length;o<n;o+=1){const i=this._docs[o];s(i,o)&&(this.removeAt(o),o-=1,n-=1,t.push(i))}return t}removeAt(s){this._docs.splice(s,1),this._myIndex.removeAt(s)}getIndex(){return this._myIndex}search(s,{limit:t=-1}={}){const{includeMatches:o,includeScore:n,shouldSort:i,sortFn:r,ignoreFieldNorm:l}=this.options;let c=Y(s)?Y(this._docs[0])?this._searchStringList(s):this._searchObjectList(s):this._searchLogical(s);return Es(c,{ignoreFieldNorm:l}),i&&c.sort(r),wt(t)&&t>-1&&(c=c.slice(0,t)),Rs(c,this._docs,{includeMatches:o,includeScore:n})}_searchStringList(s){const t=Fe(s,this.options),{records:o}=this._myIndex,n=[];return o.forEach(({v:i,i:r,n:l})=>{if(!K(i))return;const{isMatch:c,score:u,indices:a}=t.searchIn(i);c&&n.push({item:i,idx:r,matches:[{score:u,value:i,norm:l,indices:a}]})}),n}_searchLogical(s){const t=Tt(s,this.options),o=(l,c,u)=>{if(!l.children){const{keyId:d,searcher:h}=l,b=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:h});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}const a=[];for(let d=0,h=l.children.length;d<h;d+=1){const b=l.children[d],I=o(b,c,u);if(I.length)a.push(...I);else if(l.operator===Ce.AND)return[]}return a},n=this._myIndex.records,i={},r=[];return n.forEach(({$:l,i:c})=>{if(K(l)){let u=o(t,l,c);u.length&&(i[c]||(i[c]={idx:c,item:l,matches:[]},r.push(i[c])),u.forEach(({matches:a})=>{i[c].matches.push(...a)}))}}),r}_searchObjectList(s){const t=Fe(s,this.options),{keys:o,records:n}=this._myIndex,i=[];return n.forEach(({$:r,i:l})=>{if(!K(r))return;let c=[];o.forEach((u,a)=>{c.push(...this._findMatches({key:u,value:r[a],searcher:t}))}),c.length&&i.push({idx:l,item:r,matches:c})}),i}_findMatches({key:s,value:t,searcher:o}){if(!K(t))return[];let n=[];if(Z(t))t.forEach(({v:i,i:r,n:l})=>{if(!K(i))return;const{isMatch:c,score:u,indices:a}=o.searchIn(i);c&&n.push({score:u,key:s,value:i,idx:r,norm:l,indices:a})});else{const{v:i,n:r}=t,{isMatch:l,score:c,indices:u}=o.searchIn(i);l&&n.push({score:c,key:s,value:i,norm:r,indices:u})}return n}}de.version="6.6.2";de.createIndex=kt;de.parseIndex=as;de.config=k;de.parseQuery=Tt;Os(Ss);function As(e,s,t){const o=()=>{var r,l;return new de((r=q(s))!=null?r:[],(l=q(t))==null?void 0:l.fuseOptions)},n=B(o());J(()=>{var r;return(r=q(t))==null?void 0:r.fuseOptions},()=>{n.value=o()},{deep:!0}),J(()=>q(s),r=>{n.value.setCollection(r)},{deep:!0});const i=C(()=>{const r=q(t);if(r!=null&&r.matchAllWhenSearchEmpty&&!q(e))return q(s).map((c,u)=>({item:c,refIndex:u}));const l=r==null?void 0:r.resultLimit;return n.value.search(q(e),l?{limit:l}:void 0)});return{fuse:n,results:i}}const $s=se({components:{HComboboxOption:Kn,UIcon:Re,UAvatar:lt,UKbd:vt},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const s=C(()=>{const o=e.group[e.groupAttribute];return typeof o=="function"?o(e.query):o});function t(o,{indices:n,value:i}){if(o===i)return"";let r="",l=0;n.forEach(u=>{const a=u[1]+1,d=a-u[0]>=e.query.length;r+=[i.substring(l,u[0]),d&&"<mark>",i.substring(u[0],a),d&&"</mark>"].filter(Boolean).join(""),l=a}),r+=i.substring(l);const c=r.indexOf("<mark>");return c>60&&(r=`...${r.substring(c-60)}`),r}return rt(()=>at("$gYa4snYWea")),{label:s,highlight:t}}}),Ts=["aria-label"],_s=["innerHTML"];function Ps(e,s,t,o,n,i){const r=Re,l=lt,c=vt,u=ve("HComboboxOption");return z(),W("div",{class:F(e.ui.group.wrapper)},[e.label?(z(),W("h2",{key:0,class:F(e.ui.group.label)},te(e.label),3)):G("",!0),ne("div",{class:F(e.ui.group.container),"aria-label":e.group[e.groupAttribute]},[(z(!0),W(Me,null,ye(e.group.commands,(a,d)=>(z(),U(u,{key:`${e.group.key}-${d}`,value:a,disabled:a.disabled,as:"template"},{default:ae(({active:h,selected:b})=>[ne("div",{class:F([e.ui.group.command.base,h?e.ui.group.command.active:e.ui.group.command.inactive,a.disabled?"cursor-not-allowed":"cursor-pointer"])},[ne("div",{class:F(e.ui.group.command.container)},[re(e.$slots,`${e.group.key}-icon`,{group:e.group,command:a,active:h,selected:b},()=>[a.icon?(z(),U(r,{key:0,name:a.icon,class:F([e.ui.group.command.icon.base,h?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,a.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):a.avatar?(z(),U(l,me({key:1,ref_for:!0},{size:e.ui.group.command.avatar.size,...a.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):a.chip?(z(),W("span",{key:2,class:F(e.ui.group.command.chip.base),style:Yt({background:`#${a.chip}`})},null,6)):G("",!0)]),ne("div",{class:F([e.ui.group.command.label,a.disabled&&e.ui.group.command.disabled])},[re(e.$slots,`${e.group.key}-command`,{group:e.group,command:a,active:h,selected:b},()=>{var I,R;return[a.prefix?(z(),W("span",{key:0,class:F(["flex-shrink-0",a.prefixClass||e.ui.group.command.prefix])},te(a.prefix),3)):G("",!0),ne("span",{class:F(["truncate",{"flex-none":a.suffix||((I=a.matches)==null?void 0:I.length)}])},te(a[e.commandAttribute]),3),(R=a.matches)!=null&&R.length?(z(),W("span",{key:1,class:F(["truncate",a.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(a[e.commandAttribute],a.matches[0])},null,10,_s)):a.suffix?(z(),W("span",{key:2,class:F(["truncate",a.suffixClass||e.ui.group.command.suffix])},te(a.suffix),3)):G("",!0)]})],2)],2),b?(z(),U(r,{key:0,name:e.selectedIcon,class:F(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):h&&(e.group.active||e.$slots[`${e.group.key}-active`])?re(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:a,active:h,selected:b},()=>[e.group.active?(z(),W("span",{key:0,class:F(e.ui.group.active)},te(e.group.active),3)):G("",!0)]):re(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:a,active:h,selected:b},()=>{var I;return[(I=a.shortcuts)!=null&&I.length?(z(),W("span",{key:0,class:F(e.ui.group.command.shortcuts)},[(z(!0),W(Me,null,ye(a.shortcuts,R=>(z(),U(c,{key:R},{default:ae(()=>[Jt(te(R),1)]),_:2},1024))),128))],2)):!a.disabled&&e.group.inactive?(z(),W("span",{key:1,class:F(e.ui.group.inactive)},te(e.group.inactive),3)):G("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,Ts)],2)}const Ls=it($s,[["render",Ps]]),ue=Qt(Ue.ui.strategy,Ue.ui.commandPalette,pn),zs=se({components:{HCombobox:Dn,HComboboxInput:Vn,HComboboxOptions:jn,UIcon:Re,UButton:ut,CommandPaletteGroup:Ls},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>ue.default.icon},loadingIcon:{type:String,default:()=>ue.default.loadingIcon},selectedIcon:{type:String,default:()=>ue.default.selectedIcon},closeButton:{type:Object,default:()=>ue.default.closeButton},emptyState:{type:Object,default:()=>ue.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:s,expose:t}){const{ui:o,attrs:n}=ct("commandPalette",_e(e,"ui"),ue,_e(e,"class")),i=B(""),r=B(),l=B(null),c=B(!1);be(()=>{e.autoselect&&L()}),be(()=>{setTimeout(()=>{var E;const y=(E=r.value)==null?void 0:E.$.provides;if(!y)return;const f=Object.getOwnPropertySymbols(y);l.value=f.length&&y[f[0]]},200)});const u=C(()=>dt({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),a=C(()=>{var f;const y=[];for(const E of e.groups)E.search||y.push(...((f=E.commands)==null?void 0:f.map(p=>({...p,group:E.key})))||[]);return y}),d=B({}),{results:h}=As(i,a,u);function b(y,f){if(y)return y.filter&&typeof y.filter=="function"&&(f=y.filter(i.value,f)),{...y,commands:f.slice(0,u.value.resultLimit)}}const I=C(()=>{if(!h.value)return[];const y=h.value.reduce((p,g)=>{var m;const{item:O,...v}=g;return O.group&&(p[m=O.group]||(p[m]=[]),p[O.group].push({...O,...v})),p},{}),f=Object.entries(y).map(([p,g])=>{const O=e.groups.find(v=>v.key===p);return O?b(O,g):null}).filter(Boolean),E=e.groups.filter(p=>{var g;return!!p.search&&((g=d.value[p.key])==null?void 0:g.length)}).map(p=>{const g=d.value[p.key]||[];return b(p,[...g])});return[...f,...E]}),R=ht(async()=>{const y=e.groups.filter(f=>!!f.search);y.length&&(c.value=!0,await Promise.all(y.map(async f=>{d.value[f.key]=await f.search(i.value)})),c.value=!1,$())},e.debounce);J(i,()=>{R(),$()});const P=C(()=>(e.loading||c.value)&&e.loadingIcon?e.loadingIcon:e.icon),T=C(()=>Xt(o.value.input.icon.base,o.value.input.icon.size,(e.loading||c.value)&&e.loadingIcon&&o.value.input.icon.loading)),S=C(()=>e.emptyState===null?null:{...o.value.default.emptyState,...e.emptyState});function $(){setTimeout(()=>{var y;(y=r.value)==null||y.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function L(){setTimeout(()=>{var y;(y=r.value)==null||y.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function x(y){s("update:modelValue",y,{query:i.value}),e.autoclear&&setTimeout(()=>{i.value=""},0)}function A(){i.value?i.value="":s("close")}return t({query:i,updateQuery:y=>{i.value=y},comboboxApi:l,results:h}),rt(()=>at("$N0ctpKNjgE")),{ui:o,attrs:n,groups:I,comboboxInput:r,query:i,iconName:P,iconClass:T,emptyState:S,onSelect:x,onClear:A}}});function Fs(e,s,t,o,n,i){const r=Re,l=ve("HComboboxInput"),c=ut,u=ve("CommandPaletteGroup"),a=ve("HComboboxOptions"),d=ve("HCombobox");return z(),U(d,me({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:ae(()=>[Zt(ne("div",{class:F(e.ui.input.wrapper)},[e.iconName?(z(),U(r,{key:0,name:e.iconName,class:F(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),ft(l,{ref:"comboboxInput",value:e.query,class:F([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding,e.closeButton&&e.ui.input.closeButton.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:s[0]||(s[0]=h=>e.query=h.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(z(),U(c,me({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{class:e.ui.input.closeButton.base,onClick:e.onClear}),null,16,["class","onClick"])):G("",!0)],2),[[en,e.searchable]]),e.groups.length?(z(),U(a,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:F(e.ui.container)},{default:ae(()=>[(z(!0),W(Me,null,ye(e.groups,h=>(z(),U(u,{key:h.key,query:e.query,group:h,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},pt({_:2},[ye(e.$slots,(b,I)=>({name:I,fn:ae(R=>[re(e.$slots,I,me({ref_for:!0},R))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?re(e.$slots,"empty-state",{key:1},()=>[ne("div",{class:F(e.ui.emptyState.wrapper)},[e.emptyState.icon?(z(),U(r,{key:0,name:e.emptyState.icon,class:F(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),ne("p",{class:F(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},te(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):G("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const Bs=it(zs,[["render",Fs]]),_t=e=>{if(!e.children)return e._path;for(const s of(e==null?void 0:e.children)||[]){const t=_t(s);if(t)return t}},Pt=(e,s)=>{for(const t of s){if(t._path===e&&!t._id)return t.children;if(t.children){const o=Pt(e,t.children);if(o)return o}}},Lt=(e,s)=>{for(const t of s){if(t._path===e)return t;if(t.children){const o=Lt(e,t.children);if(o)return o}}},Ns=(e,s,t)=>{let o;const n=(i,r)=>{for(const l of r)if(!(i!=="/"&&l._path==="/")){if(i!=null&&i.startsWith(l._path)&&l[s]&&(o=l[s]),l._path===i)return;l.children&&n(i,l.children)}};return n(e,t),o},Ds=()=>({navBottomLink:_t,navDirFromPath:Pt,navPageFromPath:Lt,navKeyFromPath:Ns});function Vs(...e){return C(()=>e.every(s=>q(s)))}function js(e){return C(()=>!q(e))}const Ks=/^[^-]+.*-.*[^-]+$/,Ws=/^[^_]+.*_.*[^_]+$/,Us=(e,s={})=>{const{macOS:t,usingInput:o}=mt();let n=[];const i=B([]),r=()=>{i.value.splice(0,i.value.length)},l=ht(r,s.chainDelay??800),c=u=>{if(!u.key)return;const a=/^[a-z]{1}$/i.test(u.key);let d;if(i.value.push(u.key),i.value.length>=2){d=i.value.slice(-2).join("-");for(const h of n.filter(b=>b.chained))if(h.key===d){h.condition.value&&(u.preventDefault(),h.handler()),r();return}}for(const h of n.filter(b=>!b.chained))if(u.key.toLowerCase()===h.key&&u.metaKey===h.metaKey&&u.ctrlKey===h.ctrlKey&&!(a&&u.shiftKey!==h.shiftKey)){h.condition.value&&(u.preventDefault(),h.handler()),r();return}l()};n=Object.entries(e).map(([u,a])=>{var I,R;if(!a)return null;let d;u.includes("-")&&u!=="-"&&!((I=u.match(Ks))!=null&&I.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`),u.includes("_")&&u!=="_"&&!((R=u.match(Ws))!=null&&R.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`);const h=u.includes("-")&&u!=="-";if(h)d={key:u.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const P=u.toLowerCase().split("_").map(T=>T);d={key:P.filter(T=>!["meta","ctrl","shift","alt"].includes(T)).join("_"),metaKey:P.includes("meta"),ctrlKey:P.includes("ctrl"),shiftKey:P.includes("shift"),altKey:P.includes("alt")}}if(d.chained=h,!t.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof a=="function"?d.handler=a:typeof a=="object"&&(d={...d,handler:a.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;const b=[];return a.usingInput?typeof a.usingInput=="string"&&b.push(C(()=>o.value===a.usingInput)):b.push(js(o)),d.condition=Vs(...b,...a.whenever||[]),d}).filter(Boolean),tn("keydown",c)},Js=se({inheritAttrs:!1,__name:"ContentSearch",props:{modelValue:{type:Boolean,default:void 0},files:{type:Array,default:()=>[]},navigation:{type:Array,default:()=>[]},links:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},fuse:{type:Object,default:()=>({})},hideColorMode:{type:Boolean,default:!1},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:s,emit:t}){const o=nn(),n=C(()=>({padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-dvh sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10"},fileIcon:{name:"i-heroicons-document-text"},default:{closeButton:{icon:o.ui.icons.close,color:"gray",variant:"ghost",size:"sm"}}})),i=e,r=t,l=sn(),{navKeyFromPath:c}=Ds(),{usingInput:u}=mt(),{isContentSearchModalOpen:a}=on(),d=ln(hn),h=rn(),{ui:b,attrs:I}=ct("content.search",_e(i,"ui"),n,void 0,!0),R=d.smaller("sm"),P=B();function T(v){var m;return v.icon?v.icon:(m=v.navigation)!=null&&m.icon?v.navigation.icon:(i.navigation&&(v.icon=c(v._path,"icon",i.navigation)),v.icon||b.value.fileIcon.name)}const S=C({get(){return i.modelValue!==void 0?i.modelValue:a.value},set(v){i.modelValue!==void 0?r("update:modelValue",v):a.value=v}}),$=C(()=>dt({},i.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value","children.children.children.children.value","children.children.children.children.children.value"]},resultLimit:12}));function L(v,m){return v?m:m==null?void 0:m.filter(w=>!w.child)}const x=C(()=>{var m,w;let v=[];return(m=i.navigation)!=null&&m.length&&(i.navigation.some(M=>{var _;return!!((_=M.children)!=null&&_.length)})?v=(i.navigation||[]).map(M=>({key:M._path,label:M.title,commands:(i.files||[]).filter(_=>{var D;return(D=_._path)==null?void 0:D.startsWith(M._path)}).flatMap(_=>y(_,M)),filter:L})):v=[{key:"docs",commands:(i.files||[]).flatMap(M=>y(M)),filter:L}]),[((w=i.links)==null?void 0:w.length)&&{key:"links",label:"Links",commands:i.links.flatMap(M=>[M.to&&{id:l.resolve(M.to).fullPath,...M,icon:M.icon||b.value.fileIcon.name},...(M.children||[]).map(_=>({id:l.resolve(_.to).fullPath,prefix:M.label,suffix:_.description,..._,icon:_.icon||M.icon||b.value.fileIcon.name}))]).filter(Boolean)},...v,...i.groups||[],!(h!=null&&h.forced)&&!i.hideColorMode&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:o.ui.icons.light,disabled:h.preference==="light",click:()=>{h.preference="light"}},{id:"theme-dark",label:"Dark",icon:o.ui.icons.dark,disabled:h.preference==="dark",click:()=>{h.preference="dark"}}]}].filter(Boolean)}),A=C(()=>S.value||!u.value);function y(v,m){var M,_,D,Q,he;const w=(M=fn((m==null?void 0:m.children)||[],v))==null?void 0:M.map(({title:H})=>H).join(" > ");return[{id:v._id,label:((_=v.navigation)==null?void 0:_.title)||v.title,title:((D=v.navigation)==null?void 0:D.title)||v.title,prefix:w,to:v._path,suffix:v.description,children:E(p(((Q=v==null?void 0:v.body)==null?void 0:Q.children)||[])),icon:T(v)},...Object.entries(g(((he=v==null?void 0:v.body)==null?void 0:he.children)||[])).map(([H,{title:ie,children:Ie}])=>{var fe;if(ie)return{id:`${v._path}${H}`,label:ie,prefix:(w?`${w} > `:"")+`${((fe=v.navigation)==null?void 0:fe.title)||v.title}`,to:`${v._path}${H}`,children:E(Ie),icon:T(v),child:!0}})].filter(Boolean)}function f(v){return(v==null?void 0:v.map(m=>{var w,M;if(["code","code-inline","em","a","strong"].includes(m.tag))return{type:"text",value:((M=(w=m.children)==null?void 0:w.find(_=>_.type==="text"))==null?void 0:M.value)||""};if(m.type==="text")return m}).filter(Boolean))||[]}function E(v){return v.map(m=>{if(["pre","style","video"].includes(m.tag))return;let w=[...m.children||[]];return["p","h1","h2","h3","h4","h5","h6","li","td","th"].includes(m.tag)&&w.length?(w=f(w).reduce((M,_)=>(M.length&&M[M.length-1].type==="text"?M[M.length-1].value+=_.value||"":M.push({..._}),M),[]),{...m,children:w}):{...m,children:E(w)}}).filter(Boolean)}function p(v){const m=[];for(const w of v){if(["h1","h2","h3"].includes(w.tag))break;m.push(w)}return m}function g(v){var _,D,Q,he;const m={};let w="",M="";for(const H of v)["h1","h2","h3"].includes(H.tag)&&(M=((Q=(D=(_=H.children)==null?void 0:_.map(ie=>{var Ie,fe;if(ie.type==="text")return ie.value;if(["code","code-inline","em","a","strong"].includes(ie.tag))return(fe=(Ie=ie.children)==null?void 0:Ie.find(zt=>zt.type==="text"))==null?void 0:fe.value}))==null?void 0:D.filter(Boolean))==null?void 0:Q.join(" "))||"",M&&((he=H.props)!=null&&he.id)&&(w=`#${encodeURIComponent(H.props.id)}`)),m[w]?m[w].children.push(H):m[w]={children:[H],title:M};return m}function O(v){S.value=!1;const m=v[0];m&&(m.click?m.click():m.to?m.target==="_blank"||m.to.startsWith("http")?window.open(m.to,m.target||"_blank"):l.push(m.to):m.href&&window.open(m.href,"_blank"))}return Us({meta_k:{usingInput:!0,whenever:[A],handler:()=>{S.value=!S.value}},escape:{usingInput:!0,whenever:[S],handler:()=>{S.value=!1}}}),s({commandPaletteRef:P}),(v,m)=>{const w=Bs,M=dn;return z(),U(M,{modelValue:j(S),"onUpdate:modelValue":m[1]||(m[1]=_=>cn(S)?S.value=_:null),overlay:!j(R),transition:!j(R),ui:j(b)},{default:ae(()=>[ft(w,me({ref_key:"commandPaletteRef",ref:P,"model-value":[],groups:j(x),ui:j(b).commandPalette,"close-button":j(b).default.closeButton,fuse:j($),multiple:""},j(I),{"onUpdate:modelValue":O,onClose:m[0]||(m[0]=_=>S.value=!1)}),pt({_:2},[ye(v.$slots,(_,D)=>({name:D,fn:ae(Q=>[re(v.$slots,D,an(un(Q)))])}))]),1040,["groups","ui","close-button","fuse"])]),_:3},8,["modelValue","overlay","transition","ui"])}}});export{Js as default};
